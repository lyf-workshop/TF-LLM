# ğŸ¯ Wordle Agent æ€§èƒ½ä¼˜åŒ–æ€»ç»“

## ğŸ“‹ å‘ç°çš„ä¸‰å¤§é—®é¢˜

ç»è¿‡æ·±å…¥åˆ†æï¼Œå‘ç°äº† Wordle Agent æ€§èƒ½ä½ä¸‹çš„ä¸‰ä¸ªå…³é”®é—®é¢˜ï¼š

---

## ğŸ”´ **é—®é¢˜ 1ï¼šå­¦ä¹ åˆ°çš„ç»éªŒè´¨é‡ä½**

### é—®é¢˜æè¿°

**æ–‡ä»¶**ï¼š`configs/agents/practice/wordle_practice_20_l4_agent.yaml`

è‡ªåŠ¨ç”Ÿæˆçš„ 7 æ¡ç»éªŒå­˜åœ¨ä¸¥é‡é—®é¢˜ï¼š

| é—®é¢˜ç±»å‹ | å…·ä½“è¡¨ç° | å½±å“ |
|---------|---------|------|
| **å†…å®¹é‡å¤** | 6 æ¡ç»éªŒéƒ½åœ¨è¯´"ç”¨ crane å¼€å±€" | ä¿¡æ¯å†—ä½™ï¼Œæ— å¢é‡ä»·å€¼ |
| **é…ç½®ä¸ç¬¦** | 2 æ¡æåˆ°"6å­—æ¯æ¸¸æˆ" | å½“å‰é…ç½®æ˜¯ 4 å­—æ¯ï¼Œç»éªŒä¸é€‚ç”¨ |
| **è¦†ç›–ç‰‡é¢** | 100% å…³æ³¨å¼€å±€ï¼Œ0% å…³æ³¨æ¨ç† | ç¼ºå°‘æ ¸å¿ƒèƒ½åŠ›ï¼ˆçº¦æŸæ¨ç†ï¼‰ |
| **å±‚æ¬¡å¤±è¡¡** | L0:86%, L1:14%, L2:0% | ç¼ºå°‘é«˜å±‚æ¬¡æ³›åŒ–ç­–ç•¥ |

### æ ¹æœ¬åŸå› 

- è®­ç»ƒæ•°æ®å¤ªå°‘ï¼ˆ20é¢˜ï¼‰â†’ ç»éªŒå¤šæ ·æ€§ä¸è¶³
- èšåˆé˜ˆå€¼è¿‡é«˜ï¼ˆL1:5, L2:3ï¼‰â†’ éš¾ä»¥ç”Ÿæˆé«˜å±‚æ¬¡ç»éªŒ
- ç»éªŒç”Ÿæˆ prompt æœªä¼˜åŒ– â†’ å…³æ³¨ç‚¹åå·®

### è§£å†³æ–¹æ¡ˆ

âœ… **å·²å®æ–½ï¼šæ‰‹åŠ¨ç¼–å†™é«˜è´¨é‡ç»éªŒ**

åˆ›å»ºäº† 9 æ¡ç²¾å¿ƒè®¾è®¡çš„ç»éªŒï¼š
- **2 æ¡ L2 å…ƒç­–ç•¥**ï¼šçº¦æŸé©±åŠ¨æ¨ç† + æ¸è¿›å¼å‡è®¾æ¶ˆé™¤
- **4 æ¡ L1 é€šç”¨æ¨¡å¼**ï¼šGREEN/YELLOW/GRAY åé¦ˆå¤„ç† + å¤šçº¦æŸç»¼åˆ
- **3 æ¡ L0 å…·ä½“æ¡ˆä¾‹**ï¼š4å­—æ¯å¼€å±€ + æ··åˆåé¦ˆç¤ºä¾‹ + å¤šYELLOWæ¢å¤

**å¯¹æ¯”**ï¼š

```
åŸç‰ˆç»éªŒï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š
- [G0-G6] é‡å¤è¯´"ç”¨craneå¼€å±€" Ã— 7

ä¼˜åŒ–ç‰ˆç»éªŒï¼ˆæ‰‹åŠ¨ç¼–å†™ï¼‰ï¼š
- [L2-META-1] çº¦æŸé©±åŠ¨è¿­ä»£ä¼˜åŒ– âœ“
- [L2-META-2] æ¸è¿›å¼å‡è®¾æ¶ˆé™¤ âœ“
- [L1-PATTERN-1] GREENåé¦ˆåˆ©ç”¨ âœ“
- [L1-PATTERN-2] YELLOWåé¦ˆä½ç½®è½®è½¬ âœ“
- [L1-PATTERN-3] GRAYåé¦ˆä¸¥æ ¼æ¶ˆé™¤ âœ“
- [L1-PATTERN-4] åæœŸå¤šçº¦æŸç»¼åˆ âœ“
- [L0-CASE-1] 4å­—æ¯å¼€å±€ç­–ç•¥ âœ“
- [L0-CASE-2] æ··åˆåé¦ˆç¤ºä¾‹ âœ“
- [L0-CASE-3] å¤šYELLOWæ¢å¤ âœ“
```

**æ–‡ä»¶**ï¼š
- ä¼˜åŒ–ç‰ˆï¼š`configs/agents/practice/wordle_practice_20_l4_agent.yaml`
- åŸç‰ˆå¤‡ä»½ï¼š`configs/agents/practice/wordle_practice_20_l4_agent_original.yaml.backup`
- è¯¦ç»†å¯¹æ¯”ï¼š`EXPERIENCE_COMPARISON.md`

---

## ğŸ”´ **é—®é¢˜ 2ï¼šå¤šè½®äº¤äº’ç¼ºå°‘å¯¹è¯å†å²** âš ï¸ **æœ€å…³é”®**

### é—®é¢˜æè¿°

**æ–‡ä»¶**ï¼š`utu/practice/korgym_adapter.py` (line 291)

åœ¨ `play_multiple_rounds()` æ–¹æ³•ä¸­ï¼Œæ¯è½®è°ƒç”¨ Agent æ—¶æ²¡æœ‰å¯ç”¨å¯¹è¯å†å²ä¿å­˜ï¼š

```python
# âŒ é—®é¢˜ä»£ç 
for round_num in range(1, self.max_rounds + 1):
    prompt = self.get_game_prompt(game_state)
    agent_result = await agent.run(prompt)  # â† ç¼ºå°‘ save=True
    ...
```

### å®é™…å½±å“

| ç»´åº¦ | æ— å¯¹è¯å†å²ï¼ˆä¿®å¤å‰ï¼‰ | æœ‰å¯¹è¯å†å²ï¼ˆä¿®å¤åï¼‰ | å½±å“ç¨‹åº¦ |
|------|---------------------|---------------------|---------|
| **æ¨ç†è¿è´¯æ€§** | âŒ æ¯è½®ç‹¬ç«‹åˆ†æ | âœ… è¿ç»­æ¨ç†é“¾ | ğŸ”¥ ä¸¥é‡ |
| **çº¦æŸè¿½è¸ª** | âŒ å¯èƒ½è¿åå·²çŸ¥çº¦æŸ | âœ… ä¸¥æ ¼éµå¾ªçº¦æŸ | ğŸ”¥ ä¸¥é‡ |
| **Token ä½¿ç”¨** | âš ï¸ é‡å¤åˆ†æå†å² | âœ… åˆ©ç”¨ä¸Šä¸‹æ–‡ | âš ï¸ ä¸­ç­‰ |
| **å‡†ç¡®ç‡** | âŒ ä½ | âœ… é«˜ | ğŸ”¥ ä¸¥é‡ |

### å…·ä½“ç¤ºä¾‹

**åœºæ™¯**ï¼šAgent åœ¨ Round 1 æ¨ç†å‡º"ä½ç½® 2 å¿…é¡»æ˜¯ 'a'"

**âŒ æ— å¯¹è¯å†å²ï¼ˆä¿®å¤å‰ï¼‰**ï¼š
```
Round 1:
  Agent: "åˆ†æï¼šä½ç½® 2 æ˜¯ 'a'"
  Agent: "çŒœæµ‹ï¼štale"
  âœ— å¯¹è¯å†å²æœªä¿å­˜

Round 2:
  Agent: ï¼ˆé‡æ–°åˆ†æåé¦ˆï¼‰
  Agent: "å¯èƒ½ä½ç½® 2 æ˜¯ 'o'ï¼Ÿ"  â† âŒ å¿˜è®°äº†ä¹‹å‰çš„ç»“è®º
  Agent: "çŒœæµ‹ï¼šsoar"  â† âŒ è¿åäº†"ä½ç½® 2 æ˜¯ 'a'"çš„çº¦æŸ
```

**âœ… æœ‰å¯¹è¯å†å²ï¼ˆä¿®å¤åï¼‰**ï¼š
```
Round 1:
  Agent: "åˆ†æï¼šä½ç½® 2 æ˜¯ 'a'"
  Agent: "çŒœæµ‹ï¼štale"
  âœ“ å¯¹è¯å†å²ä¿å­˜

Round 2:
  Agent: ï¼ˆçœ‹åˆ°ä¹‹å‰çš„æ¨ç†ï¼‰"æˆ‘ä¸Šä¸€è½®ç¡®å®šä½ç½® 2 æ˜¯ 'a'"
  Agent: "åŸºäºè¿™ä¸ªçº¦æŸï¼Œæˆ‘çŒœï¼šeach"  â† âœ… ä¸¥æ ¼éµå¾ªçº¦æŸ
```

### æ ¹æœ¬åŸå› 

- Agent çš„ `run()` æ–¹æ³•é»˜è®¤ `save=False`
- æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹ä¼šè¯ï¼Œä¸ä¿å­˜ä¸Šä¸‹æ–‡
- è™½ç„¶ prompt åŒ…å«æ¸¸æˆå†å²ï¼Œä½† Agent ä¸è®°å¾—è‡ªå·±çš„æ¨ç†è¿‡ç¨‹

### è§£å†³æ–¹æ¡ˆ

âœ… **å·²å®æ–½ï¼šå¯ç”¨å¯¹è¯å†å²ä¿å­˜**

```python
# âœ… ä¿®å¤åä»£ç 
for round_num in range(1, self.max_rounds + 1):
    prompt = self.get_game_prompt(game_state)
    # å¯ç”¨å¯¹è¯å†å²ä¿å­˜ï¼Œä¿æŒæ¨ç†è¿è´¯æ€§
    agent_result = await agent.run(prompt, save=True)  # â† æ·»åŠ  save=True
    ...
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š`utu/practice/korgym_adapter.py` (line 291)

**è¯¦ç»†åˆ†æ**ï¼š`MULTIROUND_INTERACTION_ISSUE.md`

---

## ğŸŸ¡ **é—®é¢˜ 3ï¼šè®­ç»ƒæ•°æ®é‡å¤ªå°**

### é—®é¢˜æè¿°

å½“å‰é…ç½®ä½¿ç”¨ 20 é¢˜è®­ç»ƒæ•°æ®ï¼ˆseeds 51-70ï¼‰ï¼Œè¿™å¯¼è‡´ï¼š

| é—®é¢˜ | å½±å“ |
|------|------|
| **ç»éªŒè¦†ç›–ä¸è¶³** | åªèƒ½å­¦åˆ°æœ‰é™çš„æ¨¡å¼ |
| **ç»éªŒé‡å¤åº¦é«˜** | ç›¸ä¼¼æƒ…å†µåå¤å­¦ä¹  |
| **æ³›åŒ–èƒ½åŠ›å¼±** | éš¾ä»¥åº”å¯¹è¯„ä¼°é›†çš„æ–°æƒ…å†µ |
| **L1/L2 éš¾ä»¥ç”Ÿæˆ** | èšåˆé˜ˆå€¼ç›¸å¯¹è¿‡é«˜ |

### æ•°æ®åˆ†æ

```
è®­ç»ƒé›†ï¼š20 é¢˜ (seeds 51-70)
è¯„ä¼°é›†ï¼š50 é¢˜ (seeds 1-50)

è¦†ç›–ç‡ï¼š20/70 = 28.6%  â† è®­ç»ƒè¦†ç›–ä¸è¶³
é‡å ç‡ï¼š0%              â† è®­ç»ƒå’Œè¯„ä¼°å®Œå…¨ä¸é‡å 
```

### è§£å†³æ–¹æ¡ˆ

âš ï¸ **å»ºè®®ï¼šå¢åŠ è®­ç»ƒæ•°æ®åˆ° 50-100 é¢˜**

```yaml
# configs/practice/korgym/wordle_practice_50.yaml

practice:
  practice_mode: true
  batch_size: 50                # â† ä» 20 å¢åŠ åˆ° 50
  rollout_concurrency: 16       # â† é€‚å½“å¢åŠ å¹¶å‘
  l1_aggregation_threshold: 3   # â† é™ä½èšåˆé˜ˆå€¼
  l2_aggregation_threshold: 2   # â† é™ä½èšåˆé˜ˆå€¼
  max_l0_recent: 30             # â† å¢åŠ  L0 ä¿ç•™æ•°é‡

korgym:
  enabled: true
  game_name: "33-wordle"
  level: 4
  max_rounds: 10
  practice_dataset_name: "KORGym-Wordle-Train-50"
  num_train_seeds: 50           # â† ä» 20 å¢åŠ åˆ° 50
  train_seeds_start: 51
  train_seeds_end: 100          # â† seeds 51-100
```

**å‘½ä»¤**ï¼š

```bash
# å‡†å¤‡ 50 é¢˜æ•°æ®é›†
uv run python scripts/data/prepare_korgym_data.py \
  --game_name "33-wordle" \
  --train_seeds_start 51 \
  --train_seeds_end 100 \
  --level 4

# è®­ç»ƒ
uv run python scripts/run_training_free_GRPO.py --config_name korgym/wordle_practice_50

# è¯„ä¼°
uv run python scripts/run_eval.py --config_name korgym/wordle_practice_50_eval
```

---

## ğŸ“Š é¢„æœŸæ”¹è¿›æ•ˆæœ

### å•ç‹¬æ”¹è¿›

| æ”¹è¿›é¡¹ | å‡†ç¡®ç‡æå‡ | æ¨ç†è´¨é‡ | å®æ–½éš¾åº¦ |
|-------|-----------|---------|---------|
| **é—®é¢˜ 1ï¼šä¼˜åŒ–ç»éªŒ** | +5-15% | â­â­â­â­ | âœ… å·²å®Œæˆ |
| **é—®é¢˜ 2ï¼šå¯¹è¯å†å²** | +5-10% | â­â­â­â­â­ | âœ… å·²å®Œæˆ |
| **é—®é¢˜ 3ï¼šå¢åŠ æ•°æ®** | +3-8% | â­â­â­ | âš ï¸ éœ€å®æ–½ |

### ç»¼åˆæ”¹è¿›

å¦‚æœ**ä¸‰é¡¹æ”¹è¿›å…¨éƒ¨å®æ–½**ï¼Œé¢„æœŸæ•ˆæœï¼š

```
åŸºçº¿å‡†ç¡®ç‡ï¼š     ~10-16%
é¢„æœŸå‡†ç¡®ç‡ï¼š     ~25-40%
æå‡å¹…åº¦ï¼š       +15-25%  ğŸš€

å¹³å‡è½®æ•°ï¼š       ä» 8-9 è½® â†’ 6-7 è½®
çº¦æŸè¿åæ¬¡æ•°ï¼š   æ˜¾è‘—å‡å°‘
æ¨ç†è¿è´¯æ€§ï¼š     è´¨çš„æå‡
```

---

## ğŸš€ æµ‹è¯•æ­¥éª¤

### Step 1: æµ‹è¯•å¯¹è¯å†å²ä¿®å¤

```bash
# æ–¹æ³• 1ï¼šè¿è¡Œæµ‹è¯•è„šæœ¬
uv run python scripts/test_conversation_history.py

# é¢„æœŸè¾“å‡ºï¼š
# âœ… PASS: Conversation history is properly accumulated!

# æ–¹æ³• 2ï¼šå¿«é€Ÿè¯„ä¼°
test_conversation_history_fix.bat
```

### Step 2: æµ‹è¯•æ‰‹åŠ¨ä¼˜åŒ–ç»éªŒ

```bash
# è¿è¡Œè¯„ä¼°ï¼ˆä½¿ç”¨ä¼˜åŒ–ç‰ˆç»éªŒï¼‰
test_manual_experiences.bat

# æˆ–æ‰‹åŠ¨æ‰§è¡Œ
uv run python scripts/run_eval.py --config_name korgym/wordle_practice_20_eval
uv run python scripts/korgym/view_korgym_results.py wordle_practice_20_eval
```

### Step 3: å¯¹æ¯”æ”¹è¿›å‰å

```bash
# æŸ¥çœ‹æ‰€æœ‰å®éªŒ
uv run python scripts/utils/clean_experiment_data.py --list

# å¯¹æ¯”ä¸¤ä¸ªå®éªŒ
uv run python scripts/korgym/compare_korgym_results.py \
  --baseline [åŸç‰ˆå®éªŒID] \
  --enhanced wordle_practice_20_eval
```

### Step 4: ï¼ˆå¯é€‰ï¼‰å¢åŠ è®­ç»ƒæ•°æ®

```bash
# å‡†å¤‡ 50 é¢˜æ•°æ®
uv run python scripts/data/prepare_korgym_data.py \
  --game_name "33-wordle" \
  --train_seeds_start 51 \
  --train_seeds_end 100 \
  --level 4

# ä¿®æ”¹é…ç½®æ–‡ä»¶
# configs/practice/korgym/wordle_practice_50.yaml

# é‡æ–°è®­ç»ƒ
uv run python scripts/run_training_free_GRPO.py --config_name korgym/wordle_practice_50

# è¯„ä¼°
uv run python scripts/run_eval.py --config_name korgym/wordle_practice_50_eval
```

---

## ğŸ“‚ ç›¸å…³æ–‡ä»¶

### æ ¸å¿ƒä¿®æ”¹

1. **å¤šè½®äº¤äº’ä¿®å¤**ï¼š
   - `utu/practice/korgym_adapter.py` (line 291) â† âœ… å·²ä¿®æ”¹

2. **ç»éªŒä¼˜åŒ–**ï¼š
   - `configs/agents/practice/wordle_practice_20_l4_agent.yaml` â† âœ… å·²ä¼˜åŒ–

### æ–‡æ¡£å’Œåˆ†æ

1. **é—®é¢˜åˆ†æ**ï¼š
   - `MULTIROUND_INTERACTION_ISSUE.md` - å¯¹è¯å†å²é—®é¢˜è¯¦è§£
   - `analyze_wordle_no_improvement.md` - ä¸ºä»€ä¹ˆæ— æå‡
   - `EXPERIENCE_COMPARISON.md` - ç»éªŒè´¨é‡å¯¹æ¯”

2. **æµ‹è¯•æŒ‡å—**ï¼š
   - `TEST_MANUAL_EXPERIENCES.md` - æµ‹è¯•ä¼˜åŒ–ç»éªŒ
   - `scripts/test_conversation_history.py` - æµ‹è¯•å¯¹è¯å†å²
   - `test_conversation_history_fix.bat` - ä¸€é”®æµ‹è¯•

3. **é…ç½®æ–‡ä»¶**ï¼š
   - `configs/practice/korgym/wordle_practice_20.yaml` - 20é¢˜è®­ç»ƒé…ç½®
   - `configs/eval/korgym/wordle_practice_20_eval.yaml` - è¯„ä¼°é…ç½®
   - `configs/agents/practice/wordle_practice_20_l4_agent.yaml` - Agenté…ç½®

---

## ğŸ’¡ å…³é”®æ´å¯Ÿ

### 1. **å¯¹è¯å†å²æ˜¯å¤šè½®æ¨ç†çš„åŸºç¡€**

Wordle è¿™æ ·çš„å¤šè½®æ¸¸æˆï¼ŒAgent éœ€è¦ï¼š
- âœ… è®°ä½è‡ªå·±çš„æ¨ç†è¿‡ç¨‹
- âœ… åŸºäºä¹‹å‰çš„ç»“è®ºç»§ç»­æ¨ç†
- âœ… ä¿æŒçº¦æŸçš„è¿è´¯è¿½è¸ª

**æ²¡æœ‰å¯¹è¯å†å² = æ¯è½®é‡æ–°å¼€å§‹ = ä½æ•ˆä¸”å®¹æ˜“å‡ºé”™**

### 2. **ç»éªŒè´¨é‡æ¯”æ•°é‡æ›´é‡è¦**

- 7 æ¡é‡å¤ç»éªŒ < 3 æ¡é«˜è´¨é‡ç‹¬ç‰¹ç»éªŒ
- éœ€è¦å¹³è¡¡ L0/L1/L2 çš„æ¯”ä¾‹
- å…³æ³¨æ ¸å¿ƒéš¾ç‚¹ï¼ˆæ¨ç†è¿‡ç¨‹ï¼‰è€Œéç®€å•éƒ¨åˆ†ï¼ˆå¼€å±€ï¼‰

### 3. **æ•°æ®é‡å½±å“ç»éªŒå¤šæ ·æ€§**

- 20 é¢˜è®­ç»ƒ â†’ ç»éªŒé‡å¤åº¦é«˜
- 50-100 é¢˜è®­ç»ƒ â†’ ç»éªŒè¦†ç›–æ›´å…¨é¢
- æ›´å¤šæ•°æ® â†’ æ›´å®¹æ˜“ç”Ÿæˆ L1/L2 é«˜å±‚æ¬¡ç»éªŒ

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ä¼˜å…ˆçº§ 1ï¼šéªŒè¯å·²å®æ–½çš„ä¿®å¤ âœ…

```bash
# æµ‹è¯•å¯¹è¯å†å²
uv run python scripts/test_conversation_history.py

# æµ‹è¯•ä¼˜åŒ–ç»éªŒ
test_manual_experiences.bat
```

### ä¼˜å…ˆçº§ 2ï¼šå¯¹æ¯”æ€§èƒ½æ”¹è¿›

```bash
# è¿è¡Œæ–°è¯„ä¼°
uv run python scripts/run_eval.py --config_name korgym/wordle_practice_20_eval

# å¯¹æ¯”ç»“æœ
uv run python scripts/korgym/compare_korgym_results.py \
  --baseline [æ—§å®éªŒ] --enhanced wordle_practice_20_eval
```

### ä¼˜å…ˆçº§ 3ï¼šå¢åŠ è®­ç»ƒæ•°æ®ï¼ˆå¯é€‰ï¼‰

```bash
# å‡†å¤‡æ›´å¤šæ•°æ®
uv run python scripts/data/prepare_korgym_data.py \
  --game_name "33-wordle" \
  --train_seeds_start 51 \
  --train_seeds_end 100 \
  --level 4

# é‡æ–°è®­ç»ƒ
uv run python scripts/run_training_free_GRPO.py --config_name korgym/wordle_practice_50
```

---

## ğŸ‰ æ€»ç»“

å‘ç°äº† **3 ä¸ªå…³é”®é—®é¢˜**ï¼Œå·²ä¿®å¤ **2 ä¸ªæœ€é‡è¦çš„é—®é¢˜**ï¼š

| é—®é¢˜ | ä¸¥é‡æ€§ | çŠ¶æ€ | é¢„æœŸæå‡ |
|------|--------|------|---------|
| **ç»éªŒè´¨é‡ä½** | ğŸ”´ é«˜ | âœ… å·²ä¿®å¤ | +5-15% |
| **æ— å¯¹è¯å†å²** | ğŸ”¥ æé«˜ | âœ… å·²ä¿®å¤ | +5-10% |
| **æ•°æ®é‡å¤ªå°** | ğŸŸ¡ ä¸­ | âš ï¸ å¾…å®æ–½ | +3-8% |

**æœ€å…³é”®çš„å‘ç°**ï¼š**å¯¹è¯å†å²ç¼ºå¤±**æ˜¯å¤šè½®æ¸¸æˆæ€§èƒ½ä½çš„æ ¸å¿ƒåŸå› ä¹‹ä¸€ï¼

---

**ğŸš€ ç°åœ¨å¯ä»¥æµ‹è¯•æ”¹è¿›æ•ˆæœäº†ï¼æœŸå¾…çœ‹åˆ°å‡†ç¡®ç‡çš„æ˜¾è‘—æå‡ï¼**

